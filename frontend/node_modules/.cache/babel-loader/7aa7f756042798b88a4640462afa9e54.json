{"ast":null,"code":"var _jsxFileName = \"/Users/leyaozhou/Around/frontend/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport { Form, Icon, Input, Button, message } from 'antd';\nimport { Link } from 'react-router-dom';\nimport { API_ROOT } from '../constants';\n\nclass NormalLoginForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          console.log('Received values of rom: ', values);\n          fetch(`${API_ROOT}/login`, {\n            method: 'POST',\n            body: JSON.stringify({\n              username: values.username,\n              password: values.password\n            })\n          }).then(response => {\n            if (response.ok) {\n              return response.text();\n            }\n\n            throw new Error(response.stateText);\n          }).then(data => {\n            console.log(data);\n            this.props.handleLoginSucceed(data);\n            message.success(\"Login Success\");\n          }).catch(err => {\n            console.log(err);\n            message.error('Login failed.');\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('username', {\n      rules: [{\n        required: true,\n        message: 'Please input your username!'\n      }]\n    })( /*#__PURE__*/React.createElement(Input, {\n      prefix: /*#__PURE__*/React.createElement(Icon, {\n        type: \"user\",\n        style: {\n          color: 'rgba(0,0,0,.25'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 39\n        }\n      }),\n      placeholder: \"Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 24\n      }\n    }))), /*#__PURE__*/React.createElement(Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }, getFieldDecorator('password', {\n      rules: [{\n        required: true,\n        message: 'Please input your password!'\n      }]\n    })( /*#__PURE__*/React.createElement(Input, {\n      prefix: /*#__PURE__*/React.createElement(Icon, {\n        type: \"lock\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 39\n        }\n      }),\n      type: \"password\",\n      placeholder: \"Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 24\n      }\n    }))), /*#__PURE__*/React.createElement(Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"login-form-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }, \"Login\"), \"Or \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 24\n      }\n    }, \"register now!\")));\n  }\n\n}\n\nconst Login = Form.create({\n  name: 'normal_login'\n})(NormalLoginForm);\nexport default Login;","map":{"version":3,"sources":["/Users/leyaozhou/Around/frontend/src/components/Login.js"],"names":["React","Component","Form","Icon","Input","Button","message","Link","API_ROOT","NormalLoginForm","handleSubmit","e","preventDefault","props","form","validateFields","err","values","console","log","fetch","method","body","JSON","stringify","username","password","then","response","ok","text","Error","stateText","data","handleLoginSucceed","success","catch","error","render","getFieldDecorator","rules","required","color","Login","create","name"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Form, Icon, Input, Button, message} from 'antd';\nimport {Link} from 'react-router-dom';\nimport {API_ROOT} from '../constants';\n\nclass NormalLoginForm extends Component {\n    handleSubmit = e => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of rom: ', values);\n                fetch(`${API_ROOT}/login`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        username: values.username,\n                        password: values.password,\n                    }),\n                }).then((response) => {\n                    if (response.ok) {\n                        return response.text();\n                    }\n                    throw new Error(response.stateText);\n                }).then((data) => {\n                    console.log(data);\n                    this.props.handleLoginSucceed(data);\n                    message.success(\"Login Success\");\n                }).catch((err) => {\n                    console.log(err);\n                    message.error('Login failed.');\n                });\n            }\n        });\n    };\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                <Form.Item>\n                    {getFieldDecorator('username', {\n                        rules: [{required: true, message: 'Please input your username!'}],\n                    })(<Input prefix={<Icon type=\"user\" style={{color:'rgba(0,0,0,.25'}} />} placeholder=\"Username\"/>,)}\n                </Form.Item>\n                <Form.Item>\n                    {getFieldDecorator('password', {\n                        rules: [{required: true, message: 'Please input your password!'}],\n                    })(<Input prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}} />} type=\"password\" placeholder=\"Password\"/>,)}\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                        Login\n                    </Button>\n                    Or <Link to=\"/register\">register now!</Link>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nconst Login = Form.create({name: 'normal_login'})(NormalLoginForm);\nexport default Login;"]},"metadata":{},"sourceType":"module"}